<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Templo dos Oráculos | Tarô</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    
    <script src="auth-guard.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Cormorant+Garamond:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root { --gold: #d4af37; --bg-dark: #050505; --card-back: #1a1a1a; }
        body { margin: 0; font-family: 'Cormorant Garamond', serif; background: var(--bg-dark); color: #e0e0e0; font-size: 19px; padding-bottom: 100px; overflow-x: hidden; }
        .container { max-width: 1000px; margin: 0 auto; padding: 20px; text-align: center; }
        .header-title { font-family: 'Cinzel'; color: var(--gold); font-size: 3em; margin-top: 20px; }
        .intro-warning-box { background: rgba(20, 20, 20, 0.9); border: 1px solid var(--gold); padding: 30px; margin: 0 auto 40px auto; max-width: 800px; border-radius: 8px; text-align: center; }
        
        .table-mat { background: radial-gradient(circle, #222 0%, #000 90%); border: 2px solid #333; border-radius: 10px; padding: 40px 20px; min-height: 450px; display: flex; justify-content: center; align-items: center; flex-direction: column; position: relative; }
        
        .spread-container { display: none; gap: 30px; justify-content: center; flex-wrap: wrap; }
        
        .tarot-card { width: 200px; height: 340px; perspective: 1000px; cursor: pointer; }
        .card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.8s; transform-style: preserve-3d; }
        .tarot-card.flipped .card-inner { transform: rotateY(180deg); }
        .card-front, .card-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 10px; border: 2px solid var(--gold); display: flex; flex-direction: column; justify-content: center; align-items: center; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .card-front { background: #111; color: var(--gold); transform: rotateY(180deg); }
        .card-back { background: var(--card-back); }
        .card-back i { font-size: 3em; color: #333; transition: 0.3s; }
        .tarot-card:hover .card-back i { color: var(--gold); transform: scale(1.1); }

        .reading-output { text-align: left; margin-top: 50px; display: none; max-width: 800px; margin-left: auto; margin-right: auto; }
        .reading-block { background: #0a0a0a; border-left: 4px solid var(--gold); padding: 30px; margin-bottom: 30px; }
        .reading-block h3 { font-family: 'Cinzel'; color: var(--gold); margin: 0 0 15px 0; border-bottom: 1px solid #333; padding-bottom: 10px; }
        
        .btn-action { background: transparent; border: 2px solid var(--gold); color: var(--gold); padding: 15px 40px; font-family: 'Cinzel'; font-size: 1.1em; cursor: pointer; transition: 0.3s; margin-top: 20px; }
        .btn-action:hover { background: var(--gold); color: #000; box-shadow: 0 0 30px var(--gold); }
        .btn-back { cursor: pointer; color: #888; text-transform: uppercase; font-size: 0.8em; margin-bottom: 20px; display: inline-block; }
        
        .arcana-num { font-size: 1.5em; display: block; font-family: 'Cinzel'; margin-bottom: 10px; }
        .arcana-icon { font-size: 4em; margin: 20px 0; display: block; }
        .arcana-name { font-size: 1.2em; font-family: 'Cinzel'; text-transform: uppercase; }

        @media print { .btn-back, .btn-action, .intro-warning-box, .table-mat { display: none !important; } .reading-output { display: block !important; } body { background: #fff; color: #000; } .reading-block { border: none; border-bottom: 2px solid #000; color: #000; background: #fff; } }
        @media(max-width: 700px) { .spread-container { flex-direction: column; align-items: center; } }
    </style>
</head>
<body>

<div class="container">
    <div onclick="window.location.href='dashboard-premium.html'" class="btn-back">← Voltar ao Hub</div>
    
    <h1 class="header-title">O ORÁCULO</h1>

    <div class="intro-warning-box" id="intro-box">
        <strong>RITUAL DE PREPARAÇÃO</strong>
        <p>Concentre-se em sua pergunta. O Tarô não dita o futuro, ele ilumina o presente.</p>
    </div>

    <div class="table-mat">
        <div id="start-screen">
            <i class="fas fa-layer-group" style="font-size: 4em; color:#333; margin-bottom:30px;"></i>
            <button class="btn-action" onclick="iniciarLeitura()">CORTAR E DISTRIBUIR</button>
        </div>

        <div class="spread-container" id="game-table">
            <div><span style="color:#666; font-family:'Cinzel'; display:block; margin-bottom:10px;">1. A Situação</span>
                <div class="tarot-card" onclick="revelar(0)"><div class="card-inner" id="card-0"><div class="card-back"><i class="fas fa-sun"></i></div><div class="card-front" id="front-0"></div></div></div>
            </div>
            <div><span style="color:#666; font-family:'Cinzel'; display:block; margin-bottom:10px;">2. O Obstáculo</span>
                <div class="tarot-card" onclick="revelar(1)"><div class="card-inner" id="card-1"><div class="card-back"><i class="fas fa-moon"></i></div><div class="card-front" id="front-1"></div></div></div>
            </div>
            <div><span style="color:#666; font-family:'Cinzel'; display:block; margin-bottom:10px;">3. O Conselho</span>
                <div class="tarot-card" onclick="revelar(2)"><div class="card-inner" id="card-2"><div class="card-back"><i class="fas fa-star"></i></div><div class="card-front" id="front-2"></div></div></div>
            </div>
        </div>
    </div>

    <div class="reading-output" id="reading-text">
        <h2 style="text-align:center; font-family:'Cinzel'; color:#fff; margin-bottom:40px;">A REVELAÇÃO</h2>
        <div id="output-content"></div>
        <div style="text-align:center; margin-top:40px;">
            <button class="btn-action" onclick="window.print()">SALVAR LEITURA</button>
            <button class="btn-action" onclick="location.reload()" style="margin-left:10px; border-color:#555; color:#888;">NOVA</button>
        </div>
    </div>
</div>

<script>
    // --- 1. BANCO DE DADOS EMBUTIDO ---
    const ARCANOS = [
        { nome: "O Louco", numero: "0", arquetipo: "O Salto de Fé", img_placeholder: "fas fa-feather-alt", geral: "Início de jornada, inocência e liberdade. Confie no universo.", conselho: "Não tenha medo de parecer tolo. Arrisque o novo." },
        { nome: "O Mago", numero: "I", arquetipo: "O Manifestador", img_placeholder: "fas fa-magic", geral: "Você tem as ferramentas. Ação e vontade consciente.", conselho: "Concentre sua vontade. O universo espera seu comando." },
        { nome: "A Sacerdotisa", numero: "II", arquetipo: "A Intuição", img_placeholder: "fas fa-book-open", geral: "Mistério e silêncio. Confie na intuição, não na lógica.", conselho: "Olhe para dentro. A resposta não está lá fora." },
        { nome: "A Imperatriz", numero: "III", arquetipo: "A Mãe", img_placeholder: "fas fa-leaf", geral: "Fertilidade, abundância e criatividade. Seus projetos vão florescer.", conselho: "Nutra seus sonhos e permita-se o prazer." },
        { nome: "O Imperador", numero: "IV", arquetipo: "O Pai", img_placeholder: "fas fa-chess-king", geral: "Ordem, estrutura e autoridade. Construa bases sólidas.", conselho: "Coloque ordem no caos. Seja firme." },
        { nome: "O Hierofante", numero: "V", arquetipo: "O Mestre", img_placeholder: "fas fa-cross", geral: "Tradição e ensino. Busque sabedoria estabelecida.", conselho: "Siga as regras ou busque um mentor." },
        { nome: "Os Enamorados", numero: "VI", arquetipo: "A Escolha", img_placeholder: "fas fa-heart", geral: "Uniões e escolhas de coração. Bifurcação no caminho.", conselho: "Siga seu coração, mas assuma as consequências." },
        { nome: "O Carro", numero: "VII", arquetipo: "A Vitória", img_placeholder: "fas fa-space-shuttle", geral: "Progresso através da vontade. Mantenha as rédeas firmes.", conselho: "Não desista. Avance com determinação." },
        { nome: "A Justiça", numero: "VIII", arquetipo: "O Equilíbrio", img_placeholder: "fas fa-balance-scale", geral: "Verdade e clareza. Você colhe o que planta.", conselho: "Seja justo e imparcial. A verdade aparecerá." },
        { nome: "O Eremita", numero: "IX", arquetipo: "A Sabedoria", img_placeholder: "fas fa-lantern", geral: "Isolamento para encontrar luz interior. Pausa necessária.", conselho: "Ilumine seu próprio caminho no silêncio." },
        { nome: "A Roda", numero: "X", arquetipo: "O Destino", img_placeholder: "fas fa-sync-alt", geral: "Mudanças cíclicas. O que sobe, desce.", conselho: "Aceite a mudança. Tudo é impermanente." },
        { nome: "A Força", numero: "XI", arquetipo: "O Domínio", img_placeholder: "fas fa-paw", geral: "Domar instintos com compaixão. Força interior.", conselho: "Domine seus monstros com gentileza." },
        { nome: "O Enforcado", numero: "XII", arquetipo: "O Sacrifício", img_placeholder: "fas fa-user-injured", geral: "Suspensão e nova perspectiva. Sacrifício necessário.", conselho: "Pare de lutar. Solte e observe." },
        { nome: "A Morte", numero: "XIII", arquetipo: "A Transformação", img_placeholder: "fas fa-skull", geral: "Fim de um ciclo. Renovação profunda.", conselho: "Desapegue do que já morreu para renascer." },
        { nome: "A Temperança", numero: "XIV", arquetipo: "A Alquimia", img_placeholder: "fas fa-glass-whiskey", geral: "Equilíbrio e paciência. Caminho do meio.", conselho: "Evite extremos. A virtude está na moderação." },
        { nome: "O Diabo", numero: "XV", arquetipo: "A Sombra", img_placeholder: "fas fa-link", geral: "Apegos e materialismo. Estar acorrentado aos desejos.", conselho: "Reconheça suas sombras para não ser escravizado." },
        { nome: "A Torre", numero: "XVI", arquetipo: "A Ruptura", img_placeholder: "fas fa-gopuram", geral: "Destruição de estruturas falsas. Libertação súbita.", conselho: "Deixe cair. Só a verdade deve ficar." },
        { nome: "A Estrela", numero: "XVII", arquetipo: "A Esperança", img_placeholder: "fas fa-star", geral: "Cura e fé após a tempestade. Conexão divina.", conselho: "Tenha fé. O universo conspira a favor." },
        { nome: "A Lua", numero: "XVIII", arquetipo: "A Ilusão", img_placeholder: "fas fa-moon", geral: "Confusão e medo subconsciente. Nada é o que parece.", conselho: "Enfrente seus medos, mas cuidado com enganos." },
        { nome: "O Sol", numero: "XIX", arquetipo: "A Alegria", img_placeholder: "fas fa-sun", geral: "Sucesso, clareza e vitalidade. Vitória total.", conselho: "Brilhe. É hora de celebrar." },
        { nome: "O Julgamento", numero: "XX", arquetipo: "O Despertar", img_placeholder: "fas fa-bullhorn", geral: "Chamado para renascer. Segunda chance.", conselho: "Ouça o chamado da alma. Liberte-se do passado." },
        { nome: "O Mundo", numero: "XXI", arquetipo: "A Realização", img_placeholder: "fas fa-globe", geral: "Conclusão de ciclo. Sucesso total e integração.", conselho: "Celebre. Um ciclo fecha para outro abrir." }
    ];

    let cartasSorteadas = [];
    let cartasReveladas = [false, false, false];

    function iniciarLeitura() {
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('intro-box').style.display = 'none';
        document.getElementById('game-table').style.display = 'flex';
        
        // Embaralhar e tirar 3
        const deck = [...ARCANOS].sort(() => Math.random() - 0.5);
        cartasSorteadas = deck.slice(0, 3);
        
        cartasSorteadas.forEach((carta, index) => {
            document.getElementById(`front-${index}`).innerHTML = `
                <div style="border:1px solid var(--gold); padding:10px; height:90%; width:85%; display:flex; flex-direction:column; justify-content:center; align-items:center;">
                    <span class="arcana-num">${carta.numero}</span>
                    <i class="${carta.img_placeholder} arcana-icon"></i>
                    <span class="arcana-name">${carta.nome}</span>
                </div>`;
        });
    }

    function revelar(index) {
        if (cartasReveladas[index]) return;
        document.getElementById(`card-${index}`).parentElement.classList.add('flipped');
        cartasReveladas[index] = true;
        if (cartasReveladas.every(Boolean)) setTimeout(mostrarInterpretacao, 800);
    }

    function mostrarInterpretacao() {
        document.getElementById('reading-text').style.display = 'block';
        const [c1, c2, c3] = cartasSorteadas;
        
        document.getElementById('output-content').innerHTML = `
            <div class="reading-block"><h3>1. A SITUAÇÃO: ${c1.nome}</h3><p>${c1.geral}</p></div>
            <div class="reading-block"><h3>2. O OBSTÁCULO: ${c2.nome}</h3><p>Desafio: ${c2.arquetipo}. ${c2.geral}</p></div>
            <div class="reading-block"><h3>3. O CONSELHO: ${c3.nome}</h3><p><strong>Diretriz:</strong> ${c3.conselho}</p></div>
        `;
        document.getElementById('reading-text').scrollIntoView({ behavior: 'smooth' });
    }
</script>
</body>
</html>